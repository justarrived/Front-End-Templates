!function(e){"use strict";e.movingBoxes=function(i,t){var n,a=this;a.$el=e(i).addClass("mb-slider"),a.el=i,a.$el.data("movingBoxes",a),a.init=function(){a.options=n=e.extend({},e.movingBoxes.defaultOptions,t),a.$el.wrap('<div class="movingBoxes mb-wrapper"><div class="mb-scroll" /></div>'),a.$window=a.$el.parent(),a.$wrap=a.$window.parent().prepend('<a class="mb-scrollButtons mb-left"></a>').append('<a class="mb-scrollButtons mb-right"></a><div class="mb-left-shadow"></div><div class="mb-right-shadow"></div>'),a.$panels=a.$el.children().addClass("mb-panel"),a.runTime=e(".mb-slider").index(a.$el)+1,a.regex=new RegExp("slider"+a.runTime+"=(\\d+)","i"),a.initialized=!1,a.currentlyMoving=!1,a.curPanel=n.initAnimation?1:a.getHash()||n.startPanel,a.width=n.width?parseInt(n.width,10):a.$el.width(),a.pWidth=n.panelWidth?n.panelWidth<=2?n.panelWidth*a.width:n.panelWidth:a.$panels.eq(0).width(),a.$left=a.$wrap.find(".mb-left").click(function(){return a.goBack(),!1}),a.$right=a.$wrap.find(".mb-right").click(function(){return a.goForward(),!1}),a.update({},!1),a.setWrap(a.curPanel),a.$el.delegate(".mb-panel","click",function(i){e(this).hasClass(n.currentPanel)||(i.preventDefault(),a.change(a.$panels.index(e(this))+a.adj,{},!0))}),a.$wrap.click(function(){a.$wrap.hasClass("mb-active-slider")||a.active()}),a.$panels.delegate("a","focus",function(i){i.preventDefault();var t=a.$panels.index(e(this).closest(".mb-panel"))+a.adj;t!==a.curPanel&&a.change(t,{},!0)}),e(document).keyup(function(e){if(!e.target.tagName.match("TEXTAREA|INPUT|SELECT"))switch(e.which){case 39:case 32:a.$wrap.is(".mb-active-slider")&&a.goForward();break;case 37:a.$wrap.is(".mb-active-slider")&&a.goBack()}}),e.each("preinit initialized initChange beforeAnimation completed".split(" "),function(i,t){e.isFunction(n[t])&&a.$el.bind(t+".movingBoxes",n[t])}),a.$el.trigger("preinit.movingBoxes",[a,a.curPanel])},a.update=function(i,t){a.$el.children(".cloned").remove(),a.$panels=a.$el.children(),a.adj=n.wrap&&a.$panels.length>1?0:1,a.width=n.width?parseInt(n.width,10):a.width,a.$wrap.css("width",a.width),n.wrap&&a.$panels.length>1&&(a.$el.prepend(a.$panels.filter(":last").clone().addClass("cloned")),a.$el.append(a.$panels.filter(":first").clone().addClass("cloned")),a.$el.find(".cloned").each(function(){e(this).find("a,input,textarea,select,button,area").removeAttr("name").attr("disabled","disabled"),e(this).find("[id]").andSelf().removeAttr("id")})),a.$panels=a.$el.children().addClass("mb-panel").each(function(){0===e(this).find(".mb-inside").length&&e(this).wrapInner('<div class="mb-inside" />')}),a.totalPanels=a.$panels.filter(":not(.cloned)").length,a.totalPanels<=1&&(a.curPanel=1),a.setSizes(t),a.buildNav(),a.change(a.curPanel,i,t),a.imagesLoaded(function(){a.setSizes(!1),a.setWrap(a.curPanel),a.initialized||setTimeout(function(){a.initialized=!0,a.change(a.getHash()||n.startPanel,{},!1),a.$el.trigger("initialized.movingBoxes",[a,a.curPanel])},2*n.speed)})},a.setSizes=function(i){a.padding=parseInt(a.$panels.css("padding-left"),10)+parseInt(a.$panels.css("margin-left"),10),a.curWidth=n.panelWidth?n.panelWidth<=2?n.panelWidth*a.width:n.panelWidth:a.pWidth,a.regWidth=a.curWidth*n.reducedSize,a.$panels.css({width:a.curWidth,fontSize:"1em"}),a.$panels.eq(a.curPanel-a.adj).addClass(n.currentPanel),a.heights=a.$panels.css("height","auto").map(function(i,t){return e(t).outerHeight(!0)}).get(),a.returnToNormal(a.curPanel,0),a.growBigger(a.curPanel,0,i),a.updateArrows(a.curPanel),a.$el.css({position:"absolute",width:(a.curWidth+2*a.padding)*a.$panels.length+(a.width-a.curWidth)/2,height:Math.max.apply(this,a.heights)+10,"padding-left":(a.width-a.curWidth)/2}),a.$window.css({height:n.fixedHeight?Math.max.apply(this,a.heights):a.heights[a.curPanel-a.adj]})},a.buildNav=function(){if(a.$nav?a.$nav.find(".mb-links").empty():a.$nav=e('<div class="mb-controls"><span class="mb-links"></span></div>').appendTo(a.$wrap),n.buildNav&&a.totalPanels>1){var i,t,l,s="";a.$panels.filter(":not(.cloned)").each(function(r){t=r+1,s='<a class="mb-link mb-panel'+t+'" href="#"></a>',l=e(s),e.isFunction(n.navFormatter)?(i=n.navFormatter(t,e(this)),"string"==typeof i?l.html(i):l=e("<a/>",i)):l.html(t),l.appendTo(a.$nav.find(".mb-links")).addClass("mb-link mb-panel"+t).data("index",t)}),a.$nav.find("a.mb-link").bind("click",function(){return a.change(e(this).data("index")),!1})}},a.returnToNormal=function(e,i){var t=a.$panels.not(":eq("+(e-a.adj)+")").removeClass(n.currentPanel);1===n.reducedSize?t.css({width:a.regWidth}):t.stop(!0,!1).animate({width:a.regWidth,fontSize:n.reducedSize+"em"},0===i?0:n.speed)},a.growBigger=function(e,i,t){var l=a.$panels.eq(e-a.adj);1===n.reducedSize?(l.css({width:a.curWidth}),setTimeout(function(){a.completed(e,t)},0===i?0:n.speed)):l.stop(!0,!1).animate({width:a.curWidth,fontSize:"1em"},0===i?0:n.speed,function(){a.completed(e,t)})},a.setWrap=function(e){if(a.totalPanels>=1){a.growBigger(e,0,!1);var i=a.$panels.eq(e-a.adj).position().left-(a.width-a.curWidth)/2+a.padding;a.$window.scrollLeft(i)}},a.completed=function(e,i){var t=a.$panels.eq(e-a.adj);t.hasClass("cloned")||t.addClass(n.currentPanel),i!==!1&&a.$el.trigger("completed.movingBoxes",[a,e])},a.goForward=function(e){a.initialized&&a.change(a.curPanel+1,e)},a.goBack=function(e){a.initialized&&a.change(a.curPanel-1,e)},a.change=function(i,t,l){if(a.totalPanels<1)return void("function"==typeof t&&t(a));var s,r,o=!1;l=l!==!1,i=e(""+i).length||i instanceof e&&e(i).length?e(i).closest(".mb-panel").index()+a.adj:parseInt(i,10),a.initialized&&l&&(a.$wrap.hasClass("mb-active-slider")||a.active(),a.$el.trigger("initChange.movingBoxes",[a,i])),n.wrap&&(i>a.totalPanels?(o=!0,i=1,a.returnToNormal(0,0),a.setWrap(0)):0===i&&(o=!1,i=a.totalPanels,a.setWrap(i+1))),i<a.adj&&(i=n.wrap?a.totalPanels:1),i>a.totalPanels-a.adj&&(i=n.wrap?1:a.totalPanels),a.curPanel===i||a.currentlyMoving&&a.initialized?a.endAnimation():(a.currentlyMoving=!n.stopAnimation,a.$curPanel=a.$panels.eq(i-a.adj),r=a.$curPanel.position().left-(a.width-a.curWidth)/2+a.padding,a.initialized&&(i>a.curPanel||o)&&(r-=a.curWidth-a.regWidth),s=n.fixedHeight?{scrollLeft:r}:{scrollLeft:r,height:a.heights[i-a.adj]},a.curPanel=i,a.initialized&&l&&a.$el.trigger("beforeAnimation.movingBoxes",[a,i]),n.delayBeforeAnimate?setTimeout(function(){a.animateBoxes(i,s,l,t)},parseInt(n.delayBeforeAnimate,10)||0):a.animateBoxes(i,s,l,t))},a.animateBoxes=function(e,i,t,l){a.$window.scrollTop(0).stop(!0,!1).animate(i,{queue:!1,duration:n.speed,easing:n.easing,complete:function(){a.initialized&&a.$window.scrollTop(0),a.currentlyMoving=!1,"function"==typeof l&&l(a)}}),a.returnToNormal(e),a.growBigger(e,n.speed,t),a.updateArrows(e),n.hashTags&&a.initialized&&a.setHash(e),a.endAnimation()},a.endAnimation=function(){n.buildNav&&a.$nav.length&&a.$nav.find("a.mb-link").removeClass(n.currentPanel).eq(a.curPanel-1).addClass(n.currentPanel)},a.updateArrows=function(e){a.$left.toggleClass(n.disabled,!n.wrap&&e===a.adj||a.totalPanels<=1),a.$right.toggleClass(n.disabled,!n.wrap&&e===a.totalPanels||a.totalPanels<=1)},a.getHash=function(){var i=window.location.hash,t=i.indexOf("&"),l=i.match(a.regex);return null!==l||/^#&/.test(i)||/#!?\//.test(i)?null!==l&&(l=n.hashTags?parseInt(l[1],10):null):(i=i.substring(0,t>=0?t:i.length),l=e(i).length&&e(i).closest(".mb-slider")[0]===a.el?e(i).closest(".mb-panel").index()+a.adj:null),l>a.totalPanels?null:l},a.setHash=function(e){var i="slider"+a.runTime+"=",t=window.location.hash;"undefined"!=typeof t&&(window.location.hash=t.indexOf(i)>0?t.replace(a.regex,i+e):t+"&"+i+e)},a.active=function(){e(".mb-active-slider").removeClass("mb-active-slider"),a.$wrap.addClass("mb-active-slider")},a.currentPanel=function(e,i){return"undefined"!=typeof e&&a.change(e,i),a.curPanel},a.imagesLoaded=function(i,t){var n,l,s=!0,r=t?e(t):a.$panels.find("img"),o=r.length;for(t=t||[],n=0;o>n;n++)"IMG"===r[n].tagName&&(l="fileSize"in r[n]&&r[n].fileSize<0&&r[n].count>10?!0:r[n].complete,s=s&&l&&0!==r[n].height,l===!1&&(t.push(r[n]),r[n].count=(r[n].count||0)+1));s?"function"==typeof i&&i():setTimeout(function(){a.imagesLoaded(i,t)},200)},a.init()},e.movingBoxes.defaultOptions={startPanel:1,reducedSize:.8,fixedHeight:!1,initAnimation:!0,stopAnimation:!1,hashTags:!0,wrap:!1,buildNav:!1,navFormatter:null,easing:"swing",speed:500,delayBeforeAnimate:0,currentPanel:"current",tooltipClass:"tooltip",disabled:"disabled",preinit:null,initialized:null,initChange:null,beforeAnimation:null,completed:null},e.fn.movingBoxes=function(i,t,n){var a;return this.each(function(){a=e(this).data("movingBoxes"),(typeof i).match("object|undefined")?a&&i instanceof e&&i.length?a.change(i,t,n):a?a.update(t,n):new e.movingBoxes(this,i):a&&a.change(i,t,n)})},e.fn.getMovingBoxes=function(){return this.data("movingBoxes")}}(jQuery),function(e){e.fn.lbSlider=function(i){var i=e.extend({leftBtn:".leftBtn",rightBtn:".rightBtn",visible:3,autoPlay:!1,autoPlayDelay:10,autoPlayDirection:"right-to-left"},i),t=function(){function t(){o.addClass("inactive"),d.addClass("inactive")}function n(){o.removeClass("inactive"),d.removeClass("inactive")}function a(){var e=i.autoPlayDirection;"left-to-right"===e?o.click():"right-to-left"===e?d.click():o.click(),m=setTimeout(a,1e3*i.autoPlayDelay)}e(this).css("overflow","hidden");var l=e(this).width(),s=l%i.visible;s&&e(this).width(l-s);var r=e(this).children("ul");r.css({position:"relative",left:"0"});var o=e(i.leftBtn),d=e(i.rightBtn),c=r.children("li").slice(0,i.visible),u="";c.each(function(){u=u+"<li>"+e(this).html()+"</li>"}),c=u;var h=r.children("li").slice(-i.visible);u="",h.each(function(){u=u+"<li>"+e(this).html()+"</li>"}),h=u;var p=r.children("li").length;r.append(c),r.prepend(h);var f=r.width()/i.visible;r.children("li").css({"float":"left",width:f});var g=r.children("li").length;if(r.width(f*g),r.css("left","-"+f*i.visible+"px"),o.click(function(i){return i.preventDefault(),e(this).hasClass("inactive")||(t(),r.animate({left:"+="+f+"px"},300,function(){"0px"==e(this).css("left")&&e(this).css("left","-"+f*p+"px"),n()})),!1}),d.click(function(a){return a.preventDefault(),e(this).hasClass("inactive")||(t(),r.animate({left:"-="+f+"px"},300,function(){e(this).css("left")=="-"+f*(i.visible+p)+"px"&&e(this).css("left","-"+f*i.visible+"px"),n()})),!1}),i.autoPlay){var m=setTimeout(a,1e3*i.autoPlayDelay);r.hover(function(){clearTimeout(m)},function(){m=setTimeout(a,1e3*i.autoPlayDelay)})}};return this.each(t)}}(jQuery),$(document).ready(function(){jQuery(".slider").lbSlider({leftBtn:".sa-left",rightBtn:".sa-right",visible:3,autoPlay:!0,autoPlayDelay:2}),$(function(){$("#slider").movingBoxes({startPanel:1,wrap:!1,buildNav:!0,navFormatter:function(){return"&#9679;"}})})});